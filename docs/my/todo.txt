Срочные:
 - Переделать связку коннектора с сценарием (указываем стартовый сценарий в коннекторе)
 - Устранить проблему с вводом текста в ллм промте филлера
 - Жесткий конфиг инструментов диалога (core)
 - Шаблоны инструментов для добавления ассистенту (управление диалогом и шагами)



Краткосрочные:
 - Выставить счет смарту за октябрь
 - Добавить в шаг список доступных инструментов
 - Замена в треде assistant_id на domain_id (переделать методы для получения истории чатов)
 - Редактирование инструментов во всем домене, а не в асистенте
 - Добавить в список истории чатов название сценария и название коннектора
 - Установка текущего сценария треду
 - Коннектор сообщение филлера передавать в core
 - Коннектор системное сообщение в тред о перебивании
 - База знаний подгрузка файлов
 - Стоимость сессий (биллинг)
 - сайт на astro
 - Эксперименты (продумать ui)
 - Вики проекта
 - *** Сокращение себестоиомсти. Обрезка треда до текущего шага, интструмент для поиска истории сообщения ***
 - Дорожная карта по сервису асистентов
 - Баг со сменой температуры (скорее всего приложенька)
 - После логаута надо обулять хранилища, а то при перезаходе под другим пользователем другие ассистенты остаются

Среднесрочные:
 - Коннектор лексикон добавить в интерфейс
 - Дополнительные настройки в инструмент transfer_call (время и разрешенные номера)
 - Коннектор для Telegram
 - Коннектор сервер регистрацй
 - Коннектор гарантированное завершение вызова
 - Коннектор тайминги/лимиты/фразы при перебивании
 - Отдельный сервис обработки скриптов (для интеграции с АМО CRM)
 - Логирование запроса тулсов
 - Прослушивание примеров дикторов
 - API подгрузки базы знаний
 - Если нода диалога является роутером, то надо скрыть кнопку "Добавить шаг", а добавлене шага реализовать с помощью комбобокса выбора роута
 - Слоты с префиксом THREAD не редактируются в правом окне


Долгосрочные:
 - Интеграция с MCP AmoCRM
 - Коненктор авито и вконтакте и ватсап



Эксперименты:
 - модель эксперимента
   - наименование
   - описание
   - назначение ассиетнта
   - сообщения в треде
   - значения слотов(ячеек) в треде
 - ui редактирования и запуска эксперимента
   - добавбление сообщений в тред (пользователь/ассистент/системное)
   - установка значения ячеек в треде
   - удаление сообщения в треде
   - запуск события в треде
   - запуск ассистента в треде (run)
   - сохранение/удаление эксперимента




{
  "action_name": "SelectTemplate",
  "inputs": {
    "templates": {
      "literal": [
        {
          "template": "пользователя зовут {CRM_USER_NAME} {CRM_USER_SECOND_NAME}",
          "required": [
            "CRM_USER_NAME",
            "CRM_USER_SECOND_NAME"
          ]
        },
        {
          "template": "пользователя зовут {CRM_USER_NAME}",
          "required": [
            "CRM_USER_NAME"
          ]
        },
        {
          "template": "имя пользователя неизвестно",
          "required": []
        }
      ]
    },
    "missing_value": {
      "literal": ""
    }
  },
  "outputs": {
    "to": "TEMP_USER_NAME_PHRASE"
  },
  "options": {
    "on_error": "skip"
  }
}

{
  "action_name": "LLMProcessDialog",
  "inputs": {
    "model": { "literal": "yandexgpt" },
    "max_tokens": { "literal": 350 },
    "temperature": { "literal": 0.3 },
    "prompt": { "literal": "Суммаризируй диалог кратко и по делу для CRM. Укажи суть намерения и ключевые детали." },
    "system_message": { "literal": "Ты — ассистент отдела продаж. Формируй лаконичные конспекты." },
    "last_n_messages": { "literal": 50 },
    "include_roles": { "literal": true },
    "wrap_dialog_as_user": { "literal": false }
  },
  "outputs": {
    "to_slot_name": "DIALOG_SUMMARY"
  },
  "options": {
    "on_error": "default",
    "default_value": "",
    "timeout_sec": 60,
    "truncate_strategy": "tail",
    "normalize_whitespace": true
  }
}