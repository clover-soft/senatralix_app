Срочные:
 - Обязательно запрашивать подтверждение удаления ячейки памяти
 - Баг со сменой температуры (скорее всего приложенька)
 - Жесткий конфиг инструментов диалога (core)
 - Шаблоны инструментов для добавления ассистенту (управление диалогом и шагами)



Краткосрочные:
 - История диалогов (продумать ui)
 - Назначение базы знаний на шаг диалога
 - Эксперименты (продумать ui)
 - Вики проекта
 - Коннектор тг
 - *** Сокращение себестоиомсти. Обрезка треда до текущего шага, интструмент для поиска истории сообщения ***
 - Дорожная карта по сервису асистентов


Среднесрочные:
 - Коннектор лексикон
 - Коннектор сервер регистрацй
 - Коннектор гарантированное завершение вызова
 - Коннектор тайминги/лимиты/фразы при перебивании
 - Коннектор системное сообщение в тред о перебивании
 - Коннектор филлеры через LLaMA
 - Отдельный сервис обработки скриптов (для интеграции с АМО CRM)
 - Логирование выполнения скриптов
 - Логирование запроса тулсов
 - База знаний подгрузка файлов
 - API подгрузки базы знаний
 - Если нода диалога является роутером, то надо скрыть кнопку "Добавить шаг", а добавлене шага реализовать с помощью комбобокса выбора роута



Долгосрочные:
 - Интеграция с MCP AmoCRM
 - Коненктор авито и вконтакте и ватсап



Эксперименты:
 - модель эксперимента
   - наименование
   - описание
   - назначение ассиетнта
   - сообщения в треде
   - значения слотов(ячеек) в треде
 - ui редактирования и запуска эксперимента
   - добавбление сообщений в тред (пользователь/ассистент/системное)
   - установка значения ячеек в треде
   - удаление сообщения в треде
   - запуск события в треде
   - запуск ассистента в треде (run)
   - сохранение/удаление эксперимента






{
  "action_name": "SelectTemplate",
  "inputs": {
    "templates": {
      "literal": [
        {
          "template": "пользователя зовут {CRM_USER_NAME} {CRM_USER_SECOND_NAME}",
          "required": [
            "CRM_USER_NAME",
            "CRM_USER_SECOND_NAME"
          ]
        },
        {
          "template": "пользователя зовут {CRM_USER_NAME}",
          "required": [
            "CRM_USER_NAME"
          ]
        },
        {
          "template": "имя пользователя неизвестно",
          "required": []
        }
      ]
    },
    "missing_value": {
      "literal": ""
    }
  },
  "outputs": {
    "to": "TEMP_USER_NAME_PHRASE"
  },
  "options": {
    "on_error": "skip"
  }
}

{
  "action_name": "LLMProcessDialog",
  "inputs": {
    "model": { "literal": "yandexgpt" },
    "max_tokens": { "literal": 350 },
    "temperature": { "literal": 0.3 },
    "prompt": { "literal": "Суммаризируй диалог кратко и по делу для CRM. Укажи суть намерения и ключевые детали." },
    "system_message": { "literal": "Ты — ассистент отдела продаж. Формируй лаконичные конспекты." },
    "last_n_messages": { "literal": 50 },
    "include_roles": { "literal": true },
    "wrap_dialog_as_user": { "literal": false }
  },
  "outputs": {
    "to_slot_name": "DIALOG_SUMMARY"
  },
  "options": {
    "on_error": "default",
    "default_value": "",
    "timeout_sec": 60,
    "truncate_strategy": "tail",
    "normalize_whitespace": true
  }
}