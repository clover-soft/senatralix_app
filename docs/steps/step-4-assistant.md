### Шаг 4: Assistant — улучшения надфичи (список ассистентов, модель, UX локального меню)

- Цель:
  - Улучшить UX надфичи Assistant: удобное добавление/редактирование ассистентов, осмысленные подписи, адаптивная раскладка карточек подфич, корректные заголовки.

- Действия:
  1) Кнопка «Добавить ассистента» в списке
  - Добавить вторую точку входа для создания ассистента в `AssistantScreen`:
    - Вариант A: FAB «+».
    - Вариант B: верхняя карточка/элемент списка «Создать ассистента».
  - Обе кнопки открывают единый диалог создания (см. 2.2).

  2) Расширение модели ассистента и редактирование
  - Модель `lib/features/assistant/models/assistant.dart`:
    - Добавить поле `description` (String?) и метод `copyWith`.
  - Провайдер списка `assistant_list_provider.dart`:
    - Поддержать `description` в состоянии и CRUD: `add(name, {description})`, `rename(id, name, {description})`, `remove(id)`.
    - Стартовый ассистент «Екатерина» дополнить описанием, напр.: «Персональный ассистент для тестов».
  - Экран списка `AssistantScreen`:
    - В карточке ассистента вместо идентификатора показывать `description` (если пусто — компактный id, стиль `labelSmall`).
    - Диалог «Создать ассистента»: поля Имя (обязательно), Описание (опционально).
    - Диалог «Переименовать ассистента»: поля Имя (обязательно), Описание (опционально), предзаполнение текущими значениями.
  - Валидация (лучшие практики):
    - name: длина 2–40, trim, запрет строк из одних пробелов; допускаем буквы/цифры/пробел/дефис/нижнее подчёркивание/эмодзи.
    - description: длина 0–280, trim, пустую строку считать null.
    - Ошибки показывать в `TextField.errorText`.

  3) AppBar: показывать имя ассистента, а не id
  - В `AssistantHomeScreen` и подфич-экранах
    - Извлекать `assistantId` из `GoRouterState` и по нему находить ассистента в `assistantListProvider`.
    - В заголовке показывать имя; если не найден, выводить «Unknown» (fallback).

  4) Подписи карточек подфич (название + короткое описание)
  - В `AssistantHomeScreen` расширить `_SubItem` полем `subtitle`.
  - Заполнить подсказки:
    - Settings — «Модель, температура, токены, промпт…»
    - Tools — «Инструменты, которые ассистент может вызывать»
    - Knowledge — «База знаний: загрузка и управление»
    - Connectors — «VOIP, Telegram, Avito, WhatsApp…»
    - Scripts — «События и действия: вход/выход, триггеры»
    - Chat — «Тестовый диалог с ассистентом»
    - Sessions — «Сессии/треды, история»
  - В карточке отображать `title` и `subtitle` (`bodySmall`/`labelMedium`, цвет `onSurfaceVariant`).

  5) Адаптивная сетка карточек подфич (1–3 колонки)
  - В `AssistantHomeScreen` улучшить логику в `LayoutBuilder`:
    - <= 480 — 1 колонка; 481–900 — 2; > 900 — 3.
  - Подстроить `childAspectRatio` (~1.8–2.0) под две строки текста.

- Ожидаемый результат:
  - `/assistant`: две точки создания ассистента (AppBar и FAB/карточка), диалог с полями Имя/Описание и валидацией; в списке у каждого элемента — имя и описание (или компактный id), действия редактировать/удалить.
  - `/assistant/:assistantId`: AppBar показывает имя, карточки подфич имеют информативные подзаголовки; сетка адаптивна (1–3 колонки).

- Критерии готовности (Definition of Done):
  - Модель `Assistant` расширена; CRUD провайдера поддерживает `description`.
  - Диалоги создания/редактирования принимают Имя/Описание с валидацией; ошибки отображаются.
  - Список ассистентов показывает описание вместо id (с fallback).
  - AppBar экранов ассистента и подфич отображает имя ассистента.
  - Локальное меню подфич содержит `subtitle`; сетка адаптивна (1–3 колонки).
  - Код M3‑совместим (цвета/типографика — через `ThemeData`/`ColorScheme`).
  - Коммит и push выполнены.

- Тесты (не используются):
  - Ручная проверка пользователем: создание/редактирование/удаление; отображение имени в AppBar; адаптивность сетки и наличие `subtitle`.

- Зависимости/примечания:
  - Используем текущий `ApiClient` через `apiClientProvider`; backend‑CRUD вынесен на последующие шаги.

- Риски:
  - Несогласованность URL/состояния при удалении текущего ассистента — при необходимости редиректить на `/assistant` (можно как TODO).

Выполнено: в процессе
